<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org"
      xmlns:sec="http://thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8"/>
    <title>User list</title>
</head>
<body>

<div th:insert="~{stuff/menu :: #nav-menu}"></div>

<table border="1">
    <tr>
        <td>Name</td>
        <td>Email</td>
        <td>Is active</td>
        <td></td>
    </tr>
    <tr th:each="user : ${users}">
        <td th:text="${user.name}"></td>
        <td th:text="${user.email}"></td>
        <td th:text="${user.isActive}"></td>
        <!--<td th:if="${user.role.name}!='ADMIN'">-->
        <td th:if="${user.isActive}" sec:authorize="hasAuthority('ADMIN')">
            <form th:action="@{/users/{id}/ban(id=${user.id})}" method="post">
                <button type="submit">Ban</button>
            </form>
        </td>
        <td th:if="${!user.isActive}" sec:authorize="hasAuthority('ADMIN')">
            <form th:action="@{/users/{id}/unban(id=${user.id})}" method="post">
                <button type="submit">Release Ban</button>
            </form>
        </td>
    </tr>

</table>

</body>
</html>
